<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronômetro</title>
    <style>
        body{
            /*No corpo da página adiciona estilo e define por frações o layout*/
            background-color: #7c7676;
            height: 100vh;
            display: grid;
            grid-template-columns: 2fr 1fr;
            grid-template-rows: 70vh 1fr;
        }
        #cronometro{
            grid-column: 1/2; /*Informa a coluna no layout*/
            grid-row: 1/2;/*Informa a linha no layout*/

            display: flex; /*Centraliza o conteúdo*/
            flex-direction: column;
            justify-content: center;
            align-items: center;  
            height: 100%;
            gap: 20px
        }
        #tempo{ /*Define o estilo do temporidador*/
            font-family: Arial, Helvetica, sans-serif;
            font-size: 80px;
            color: #b1afaf;
            border-right: 1px solid #b1afaf;
            display: flex;
            justify-content: end;
            gap: 20px;
        }
        .botoes{/*Define o estilo e centraliza o conteúdo dos botões*/
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #b1afaf;
            font-size: 18px;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            color: #7c7676;
            border-radius: 5px;
            height: 40px;
            width: 120px;
        }
        #historico{
            grid-column: 2/3; /*Informa coluna no layout*/
            grid-row: 1/2; /*Informa linha no layout*/
            display: flex;
            background-color: #b1afaf;
            border-top-right-radius: 20px; 
            border-top-left-radius: 20px;
            flex-direction: column;
            align-items: center;
            padding-top: 50px;
        }
        #titulo{ /*Define estilo*/
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            color: black;
            font-size: 24px;
        }
        .listaImpar{/*Define estilo*/
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: 14px;
            background-color: #a1ddf9;
        }
        .listaPar{/*Define estilo*/
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: 14px;
        }
        #comandos{
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            grid-row: 2 / 3; /*Define linha*/
            grid-column: 1 / -1; /*Define coluna*/
            padding: 20px;
            border: 5px groove #333;
            background-color: #d3d3d3;
        }
    </style>
</head>
<body>
    <div id="cronometro">
        <div id="tempo">00:00:00</div>
        <div class="botoes" id="iniciar" onclick="inicioFim(1)">▷ Iniciar</div>
        <div class="botoes" id="limpar" onclick="inicioFim(0)">☑ Parar</div>
    </div>
    <div id="historico">
        <div id="titulo">Paradas</div>
        <ol id="pausasLista"></ol>
    </div>
    <div id="comandos">
        <h5 style="font-size: 20px;">Relação de comandos pelo teclado:</h5>
        <u>
            <li style="font-size: 16px;">I = Iniciar o cronômetro</li>
            <li style="font-size: 16px;">P = Pausar o cronômetro</li>
        </u>
    </div>
    <script>
        let dataInicio;
        let cronometroElemento = document.getElementById("tempo");
        let intervalo;
        let botao = 0;
        let tempo = "00:00:00";

        let seg = 0;
        let min = 0;
        let hora = 0;

        let pausas = []; //Armazena o histórico
        let pausasListaElemento = document.getElementById("pausasLista");

        function cronometrar(){ //Função chamada para realizar a contagem do tempo
            seg ++;
            if(seg >= 60){
                seg = 0;
                min++;
            }
            if(min >= 60){
                min = 0;
                hora++;
            }

            //Formata o número do cronometro 
            const hFormatada = hora < 10 ? '0' + hora : hora;
            const mFormatada = min < 10 ? '0' + min : min;
            const sFormatada = seg < 10 ? '0' + seg : seg;

            tempo = `${hFormatada}:${mFormatada}:${sFormatada}`;
            cronometroElemento.innerHTML = tempo; //Atualiza o display
        }

        function inicioFim(botao){
            if(botao == 1){
                dataInicio = new Date();//Registra o inicio
                intervalo = setInterval(cronometrar, 1000); //Usando o setInterval, chama a função cronometrar a cada 1 segundo
            } else if(botao == 0){
                clearInterval(intervalo);//Para a função setInterval
                pausas.push(tempo); //Adiciona o tempo no histórico
                listaPausas();//Chama a função de atualizar a lista
                seg = 0;
                min = 0;
                hora = 0;
                cronometroElemento.innerHTML= "00:00:00";
            }
        }

        function listaPausas(){ //Função chamada para atualizar a lista de pausas
            pausasListaElemento.innerHTML=""; //Limpa o conteúdo da lista antes de iniciar

            //Verifica cada elemento do array e cria um elemento HTML para ele
            pausas.forEach((pausasTempo, indice) => {
                let listaItem = document.createElement('li');

                //Lógica que verifica o número do item para alterar a cor
                if((indice+1) % 2 !== 0){
                    listaItem.classList.add('listaImpar');
                } else{
                    listaItem.classList.add('listaPar');
                }

                listaItem.innerHTML = pausasTempo;
                pausasListaElemento.appendChild(listaItem);
            });
        }

        //Adiciona evento para quando teclas específicas forem pressionadas
        document.addEventListener('keydown', (tecla)=>{
            switch(tecla.key.toLocaleLowerCase()){
                case 'i': inicioFim(1); break;
                case 'p': inicioFim(0); break;
                default: alert("Tecla de comando inválida, tente novamente!");break;
            }
        })
    </script>
</body>
</html>